/*!
 * Jusfoun D3 Chart Library
 * Powered by Jusfoun Visualization Department
 * Contact: 
 *   vd@jusfoun.com
 *   http://vd.jusfoun.com
 * 
 * Copyright (c) 2017, Jusfoun Big Data Group Inc.
 * All rights reserved.
 * 
 * LICENSE
 * http://www.jusfoun.com/software/LICENSE.txt
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("JusfounD3Charts",[],e):"object"==typeof exports?exports.JusfounD3Charts=e():t.JusfounD3Charts=e()}(this,function(){return function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){e.mapSelect=i(1),e.scatterChart=i(7)},function(t,e,i){var a=i(2),n=i(3),r=function(){n.call(this)},s={"世界":"0","中国":"0","北京":"1","天津":"1","河北":"1","山西":"1","内蒙古":"1","辽宁":"1","吉林":"1","黑龙江":"1","上海":"1","江苏":"1","浙江":"1","安徽":"1","福建":"1","江西":"1","山东":"1","河南":"1","湖北":"1","湖南":"1","广东":"1","广西":"1","海南":"1","重庆":"1","四川":"1","贵州":"1","云南":"1","西藏":"1","陕西":"1","甘肃":"1","青海":"1","宁夏":"1","新疆":"1","台湾":"1","香港":"1","澳门":"1","崇明县":"2","湖北省直辖县市":"2","铜仁市":"2","毕节市":"2","石家庄市":"2","唐山市":"2","秦皇岛市":"2","邯郸市":"2","邢台市":"2","保定市":"2","张家口市":"2","承德市":"2","沧州市":"2","廊坊市":"2","衡水市":"2","太原市":"2","大同市":"2","阳泉市":"2","长治市":"2","晋城市":"2","朔州市":"2","晋中市":"2","运城市":"2","忻州市":"2","临汾市":"2","吕梁市":"2","呼和浩特市":"2","包头市":"2","乌海市":"2","赤峰市":"2","通辽市":"2","鄂尔多斯市":"2","呼伦贝尔市":"2","巴彦淖尔市":"2","乌兰察布市":"2","兴安盟":"2","锡林郭勒盟":"2","阿拉善盟":"2","沈阳市":"2","大连市":"2","鞍山市":"2","抚顺市":"2","本溪市":"2","丹东市":"2","锦州市":"2","营口市":"2","阜新市":"2","辽阳市":"2","盘锦市":"2","铁岭市":"2","朝阳市":"2","葫芦岛市":"2","长春市":"2","吉林市":"2","四平市":"2","辽源市":"2","通化市":"2","白山市":"2","松原市":"2","白城市":"2","延边朝鲜族自治州":"2","哈尔滨市":"2","齐齐哈尔市":"2","鸡西市":"2","鹤岗市":"2","双鸭山市":"2","大庆市":"2","伊春市":"2","佳木斯市":"2","七台河市":"2","牡丹江市":"2","黑河市":"2","绥化市":"2","大兴安岭地区":"2","南京市":"2","无锡市":"2","徐州市":"2","常州市":"2","苏州市":"2","南通市":"2","连云港市":"2","淮安市":"2","盐城市":"2","扬州市":"2","镇江市":"2","泰州市":"2","宿迁市":"2","杭州市":"2","宁波市":"2","温州市":"2","嘉兴市":"2","湖州市":"2","绍兴市":"2","金华市":"2","衢州市":"2","舟山市":"2","台州市":"2","丽水市":"2","合肥市":"2","芜湖市":"2","蚌埠市":"2","淮南市":"2","马鞍山市":"2","淮北市":"2","铜陵市":"2","安庆市":"2","黄山市":"2","滁州市":"2","阜阳市":"2","宿州市":"2","六安市":"2","亳州市":"2","池州市":"2","宣城市":"2","福州市":"2","厦门市":"2","莆田市":"2","三明市":"2","泉州市":"2","漳州市":"2","南平市":"2","龙岩市":"2","宁德市":"2","南昌市":"2","景德镇市":"2","萍乡市":"2","九江市":"2","新余市":"2","鹰潭市":"2","赣州市":"2","吉安市":"2","宜春市":"2","抚州市":"2","上饶市":"2","济南市":"2","青岛市":"2","淄博市":"2","枣庄市":"2","东营市":"2","烟台市":"2","潍坊市":"2","济宁市":"2","泰安市":"2","威海市":"2","日照市":"2","莱芜市":"2","临沂市":"2","德州市":"2","聊城市":"2","滨州市":"2","菏泽市":"2","郑州市":"2","开封市":"2","洛阳市":"2","平顶山市":"2","安阳市":"2","鹤壁市":"2","新乡市":"2","焦作市":"2","濮阳市":"2","许昌市":"2","漯河市":"2","三门峡市":"2","南阳市":"2","商丘市":"2","信阳市":"2","周口市":"2","驻马店市":"2","省直辖县级行政区划":"2","武汉市":"2","黄石市":"2","十堰市":"2","宜昌市":"2","襄阳市":"2","鄂州市":"2","荆门市":"2","孝感市":"2","荆州市":"2","黄冈市":"2","咸宁市":"2","随州市":"2","恩施土家族苗族自治州":"2","长沙市":"2","株洲市":"2","湘潭市":"2","衡阳市":"2","邵阳市":"2","岳阳市":"2","常德市":"2","张家界市":"2","益阳市":"2","郴州市":"2","永州市":"2","怀化市":"2","娄底市":"2","湘西土家族苗族自治州":"2","广州市":"2","韶关市":"2","深圳市":"2","珠海市":"2","汕头市":"2","佛山市":"2","江门市":"2","湛江市":"2","茂名市":"2","肇庆市":"2","惠州市":"2","梅州市":"2","汕尾市":"2","河源市":"2","阳江市":"2","清远市":"2","东莞市":"2","中山市":"2","潮州市":"2","揭阳市":"2","云浮市":"2","南宁市":"2","柳州市":"2","桂林市":"2","梧州市":"2","北海市":"2","防城港市":"2","钦州市":"2","贵港市":"2","玉林市":"2","百色市":"2","贺州市":"2","河池市":"2","来宾市":"2","崇左市":"2","海口市":"2","三亚市":"2","三沙市":"2","成都市":"2","自贡市":"2","攀枝花市":"2","泸州市":"2","德阳市":"2","绵阳市":"2","广元市":"2","遂宁市":"2","内江市":"2","乐山市":"2","南充市":"2","眉山市":"2","宜宾市":"2","广安市":"2","达州市":"2","雅安市":"2","巴中市":"2","资阳市":"2","阿坝藏族羌族自治州":"2","甘孜藏族自治州":"2","凉山彝族自治州":"2","贵阳市":"2","六盘水市":"2","遵义市":"2","安顺市":"2","黔西南布依族苗族自治州":"2","黔东南苗族侗族自治州":"2","黔南布依族苗族自治州":"2","昆明市":"2","曲靖市":"2","玉溪市":"2","保山市":"2","昭通市":"2","丽江市":"2","普洱市":"2","临沧市":"2","楚雄彝族自治州":"2","红河哈尼族彝族自治州":"2","文山壮族苗族自治州":"2","西双版纳傣族自治州":"2","大理白族自治州":"2","德宏傣族景颇族自治州":"2","怒江傈僳族自治州":"2","迪庆藏族自治州":"2","拉萨市":"2","昌都地区":"2","山南地区":"2","日喀则地区":"2","那曲地区":"2","阿里地区":"2","林芝地区":"2","西安市":"2","铜川市":"2","宝鸡市":"2","咸阳市":"2","渭南市":"2","延安市":"2","汉中市":"2","榆林市":"2","安康市":"2","商洛市":"2","兰州市":"2","嘉峪关市":"2","金昌市":"2","白银市":"2","天水市":"2","武威市":"2","张掖市":"2","平凉市":"2","酒泉市":"2","庆阳市":"2","定西市":"2","陇南市":"2","临夏回族自治州":"2","甘南藏族自治州":"2","西宁市":"2","海东地区":"2","海北藏族自治州":"2","黄南藏族自治州":"2","海南藏族自治州":"2","果洛藏族自治州":"2","玉树藏族自治州":"2","海西蒙古族藏族自治州":"2","银川市":"2","石嘴山市":"2","吴忠市":"2","固原市":"2","中卫市":"2","乌鲁木齐市":"2","克拉玛依市":"2","吐鲁番地区":"2","哈密地区":"2","昌吉回族自治州":"2","博尔塔拉蒙古自治州":"2","巴音郭楞蒙古自治州":"2","阿克苏地区":"2","克孜勒苏柯尔克孜自治州":"2","喀什地区":"2","和田地区":"2","伊犁哈萨克自治州":"2","塔城地区":"2","阿勒泰地区":"2","自治区直辖县级行政区划":"2","台湾省":"2","香港特别行政区":"2","澳门特别行政区":"2"},o={"世界":"world","中国":"china","北京":"110000","天津":"120000","河北":"130000","山西":"140000","内蒙古":"150000","辽宁":"210000","吉林":"220000","黑龙江":"230000","上海":"310000","江苏":"320000","浙江":"330000","安徽":"340000","福建":"350000","江西":"360000","山东":"370000","河南":"410000","湖北":"420000","湖南":"430000","广东":"440000","广西":"450000","海南":"460000","重庆":"500000","四川":"510000","贵州":"520000","云南":"530000","西藏":"540000","陕西":"610000","甘肃":"620000","青海":"630000","宁夏":"640000","新疆":"650000","台湾":"710000","香港":"810000","澳门":"820000","崇明县":"310200","湖北省直辖县市":"429000","铜仁市":"522200","毕节市":"522400","石家庄市":"130100","唐山市":"130200","秦皇岛市":"130300","邯郸市":"130400","邢台市":"130500","保定市":"130600","张家口市":"130700","承德市":"130800","沧州市":"130900","廊坊市":"131000","衡水市":"131100","太原市":"140100","大同市":"140200","阳泉市":"140300","长治市":"140400","晋城市":"140500","朔州市":"140600","晋中市":"140700","运城市":"140800","忻州市":"140900","临汾市":"141000","吕梁市":"141100","呼和浩特市":"150100","包头市":"150200","乌海市":"150300","赤峰市":"150400","通辽市":"150500","鄂尔多斯市":"150600","呼伦贝尔市":"150700","巴彦淖尔市":"150800","乌兰察布市":"150900","兴安盟":"152200","锡林郭勒盟":"152500","阿拉善盟":"152900","沈阳市":"210100","大连市":"210200","鞍山市":"210300","抚顺市":"210400","本溪市":"210500","丹东市":"210600","锦州市":"210700","营口市":"210800","阜新市":"210900","辽阳市":"211000","盘锦市":"211100","铁岭市":"211200","朝阳市":"211300","葫芦岛市":"211400","长春市":"220100","吉林市":"220200","四平市":"220300","辽源市":"220400","通化市":"220500","白山市":"220600","松原市":"220700","白城市":"220800","延边朝鲜族自治州":"222400","哈尔滨市":"230100","齐齐哈尔市":"230200","鸡西市":"230300","鹤岗市":"230400","双鸭山市":"230500","大庆市":"230600","伊春市":"230700","佳木斯市":"230800","七台河市":"230900","牡丹江市":"231000","黑河市":"231100","绥化市":"231200","大兴安岭地区":"232700","南京市":"320100","无锡市":"320200","徐州市":"320300","常州市":"320400","苏州市":"320500","南通市":"320600","连云港市":"320700","淮安市":"320800","盐城市":"320900","扬州市":"321000","镇江市":"321100","泰州市":"321200","宿迁市":"321300","杭州市":"330100","宁波市":"330200","温州市":"330300","嘉兴市":"330400","湖州市":"330500","绍兴市":"330600","金华市":"330700","衢州市":"330800","舟山市":"330900","台州市":"331000","丽水市":"331100","合肥市":"340100","芜湖市":"340200","蚌埠市":"340300","淮南市":"340400","马鞍山市":"340500","淮北市":"340600","铜陵市":"340700","安庆市":"340800","黄山市":"341000","滁州市":"341100","阜阳市":"341200","宿州市":"341300","六安市":"341500","亳州市":"341600","池州市":"341700","宣城市":"341800","福州市":"350100","厦门市":"350200","莆田市":"350300","三明市":"350400","泉州市":"350500","漳州市":"350600","南平市":"350700","龙岩市":"350800","宁德市":"350900","南昌市":"360100","景德镇市":"360200","萍乡市":"360300","九江市":"360400","新余市":"360500","鹰潭市":"360600","赣州市":"360700","吉安市":"360800","宜春市":"360900","抚州市":"361000","上饶市":"361100","济南市":"370100","青岛市":"370200","淄博市":"370300","枣庄市":"370400","东营市":"370500","烟台市":"370600","潍坊市":"370700","济宁市":"370800","泰安市":"370900","威海市":"371000","日照市":"371100","莱芜市":"371200","临沂市":"371300","德州市":"371400","聊城市":"371500","滨州市":"371600","菏泽市":"371700","郑州市":"410100","开封市":"410200","洛阳市":"410300","平顶山市":"410400","安阳市":"410500","鹤壁市":"410600","新乡市":"410700","焦作市":"410800","濮阳市":"410900","许昌市":"411000","漯河市":"411100","三门峡市":"411200","南阳市":"411300","商丘市":"411400","信阳市":"411500","周口市":"411600","驻马店市":"411700","省直辖县级行政区划":"469000","武汉市":"420100","黄石市":"420200","十堰市":"420300","宜昌市":"420500","襄阳市":"420600","鄂州市":"420700","荆门市":"420800","孝感市":"420900","荆州市":"421000","黄冈市":"421100","咸宁市":"421200","随州市":"421300","恩施土家族苗族自治州":"422800","长沙市":"430100","株洲市":"430200","湘潭市":"430300","衡阳市":"430400","邵阳市":"430500","岳阳市":"430600","常德市":"430700","张家界市":"430800","益阳市":"430900","郴州市":"431000","永州市":"431100","怀化市":"431200","娄底市":"431300","湘西土家族苗族自治州":"433100","广州市":"440100","韶关市":"440200","深圳市":"440300","珠海市":"440400","汕头市":"440500","佛山市":"440600","江门市":"440700","湛江市":"440800","茂名市":"440900","肇庆市":"441200","惠州市":"441300","梅州市":"441400","汕尾市":"441500","河源市":"441600","阳江市":"441700","清远市":"441800","东莞市":"441900","中山市":"442000","潮州市":"445100","揭阳市":"445200","云浮市":"445300","南宁市":"450100","柳州市":"450200","桂林市":"450300","梧州市":"450400","北海市":"450500","防城港市":"450600","钦州市":"450700","贵港市":"450800","玉林市":"450900","百色市":"451000","贺州市":"451100","河池市":"451200","来宾市":"451300","崇左市":"451400","海口市":"460100","三亚市":"460200","三沙市":"460300","成都市":"510100","自贡市":"510300","攀枝花市":"510400","泸州市":"510500","德阳市":"510600","绵阳市":"510700","广元市":"510800","遂宁市":"510900","内江市":"511000","乐山市":"511100","南充市":"511300","眉山市":"511400","宜宾市":"511500","广安市":"511600","达州市":"511700","雅安市":"511800","巴中市":"511900","资阳市":"512000","阿坝藏族羌族自治州":"513200","甘孜藏族自治州":"513300","凉山彝族自治州":"513400","贵阳市":"520100","六盘水市":"520200","遵义市":"520300","安顺市":"520400","黔西南布依族苗族自治州":"522300","黔东南苗族侗族自治州":"522600","黔南布依族苗族自治州":"522700","昆明市":"530100","曲靖市":"530300","玉溪市":"530400","保山市":"530500","昭通市":"530600","丽江市":"530700","普洱市":"530800","临沧市":"530900","楚雄彝族自治州":"532300","红河哈尼族彝族自治州":"532500","文山壮族苗族自治州":"532600","西双版纳傣族自治州":"532800","大理白族自治州":"532900","德宏傣族景颇族自治州":"533100","怒江傈僳族自治州":"533300","迪庆藏族自治州":"533400","拉萨市":"540100","昌都地区":"542100","山南地区":"542200","日喀则地区":"542300","那曲地区":"542400","阿里地区":"542500","林芝地区":"542600","西安市":"610100","铜川市":"610200","宝鸡市":"610300","咸阳市":"610400","渭南市":"610500","延安市":"610600","汉中市":"610700","榆林市":"610800","安康市":"610900","商洛市":"611000","兰州市":"620100","嘉峪关市":"620200","金昌市":"620300","白银市":"620400","天水市":"620500","武威市":"620600","张掖市":"620700","平凉市":"620800","酒泉市":"620900","庆阳市":"621000","定西市":"621100","陇南市":"621200","临夏回族自治州":"622900","甘南藏族自治州":"623000","西宁市":"630100","海东地区":"632100","海北藏族自治州":"632200","黄南藏族自治州":"632300","海南藏族自治州":"632500","果洛藏族自治州":"632600","玉树藏族自治州":"632700","海西蒙古族藏族自治州":"632800","银川市":"640100","石嘴山市":"640200","吴忠市":"640300","固原市":"640400","中卫市":"640500","乌鲁木齐市":"650100","克拉玛依市":"650200","吐鲁番地区":"652100","哈密地区":"652200","昌吉回族自治州":"652300","博尔塔拉蒙古自治州":"652700","巴音郭楞蒙古自治州":"652800","阿克苏地区":"652900","克孜勒苏柯尔克孜自治州":"653000","喀什地区":"653100","和田地区":"653200","伊犁哈萨克自治州":"654000","塔城地区":"654200","阿勒泰地区":"654300","自治区直辖县级行政区划":"659000","台湾省":"710000","香港特别行政区":"810100","澳门特别行政区":"820000"};r.prototype=a(n.prototype,{isGet:null,timer:null,init:function(t){var e=this;if(!t||e.isEmpty(t))throw new Error("init方法参数为空.");e._dom=t.dom.length?t.dom[0]:t.dom,e._citydata=t.cityData||o,e._jsonUrl=t.jsonUrl,e.areaColor=t.areaColor,e.showVisualMap=void 0==t.showVisualMap||t.showVisualMap,e.itemHeight=t.VisualMapItemHeight||20,e.itemWidth=t.VisualMapItemWidth||20,e.margin=t.VisualMapTextMargin||20,e.VisualMapText=t.VisualMapText||"",e.scaleLimitMin=t.scaleLimitMin||.5,e.scaleLimitMax=t.scaleLimitMax||1.5,e._nameMap=t.nameMap,e.option={title:{text:e.VisualMapText||"",textStyle:{color:"#88C4FC",fontSize:14,fontWeight:"normal"},bottom:6*e.itemHeight+40+e.margin,left:20},tooltip:{formatter:t.tooltipFormatter,borderColor:"#8ac7ff",borderWidth:1,padding:[15,10],textStyle:{color:"#85C0F8",fontSize:14},extraCssText:"background:RGBA(34,58,131,0.8)"},visualMap:[{type:"piecewise",show:e.showVisualMap,itemGap:0,splitNumber:6,inRange:{symbol:"rect",color:t.areaColor},outOfRange:{color:"#ffffff "},itemWidth:e.itemWidth,itemHeight:e.itemHeight,formatter:function(t,e){return t+"-"+e},hoverLink:!1,textStyle:{color:"#88C4FC",fontSize:14},bottom:40,left:40}],series:[{type:"map",top:20,roam:!0,label:{normal:{show:!1},emphasis:{show:!1}},scaleLimit:{min:e.scaleLimitMin,max:e.scaleLimitMax},itemStyle:{normal:{areaColor:"#ffffff",color:"#ffffff"}},data:[]}]},e._myChart=echarts.init(e._dom)},render:function(t){var e=this;e.type=t,$.getJSON(e._jsonUrl+t+".json",function(i){if("world"==t){var a=[];i.features.forEach(function(t,i){var n=t.properties.name,r=e._nameMap[n];"France"!=n&&"United Kingdom"!=n&&"Israel"!=n&&"United States of America"!=n&&"Denmark"!=n||a.push(i),r&&(t.properties.name=r)}),a.sort(function(t,e){return e-t});for(var n=0;n<a.length;n++)168!=a[n]&&77!=a[n]&&56!=a[n]&&54!=a[n]&&42!=a[n]&&i.features.splice(a[n],1)}echarts.registerMap(t,i),e.option.series[0].map=t,e.isGet=!0})},setData:function(t){var e,i,a,n,r=this,s=0;if(!t||r.isEmpty(t))throw new Error("setData方法的参数为空.");clearTimeout(r.timer),r.timer=setTimeout(function(){function o(t,e,i){var a=new Array,n=0,e=parseInt(e);if(!Array.isArray(t))throw new Error("参数一格式错误.");if(isNaN(e))throw new Error("参数二格式错误.");for(var r=(t.length-u)/e;n<e;n++){var s=t[Math.round(n*r)+u],o=t[Math.round((n+1)*r)+u];u>0&&0==n&&(s=0),void 0==o&&(o=i),s!=o&&a.push({min:parseInt(s),max:parseInt(o)})}return a}function l(t){setTimeout(function(){r.isGet?r._myChart.setOption(t,!0,!1,!0):l(t)},100)}if(r.option.title.text=t.VisualMapText,r.option.visualMap[0].inRange.color=t.areaColor||r.areaColor,r.showVisualMap=void 0!=t.showVisualMap?t.showVisualMap:r.showVisualMap,r.option.visualMap[0].show=r.showVisualMap,e=t.labelShow,i=t.data,0==i.length)return r.option.visualMap[0].min=0,r.option.visualMap[0].max=0,r.option.visualMap[0].pieces=null,r.option.visualMap[0].formatter=function(t,e){return Math.floor(t)+"-"+Math.ceil(e)},void l(r.option);i.sort(function(t,i){return 1==e?t.valueArea-i.valueArea:2==e?t.value-i.value:void 0});var u=0,p=i.map(function(t){return 1==e?(0==t.valueArea&&u++,t.valueArea||0):2==e?(0==t.value&&u++,t.value||0):void 0});a=p[0],n=p[p.length-1];var h=6;if(p.length<h||p.length-u<6)r.option.visualMap[0].max=n,r.option.visualMap[0].min=a,r.option.visualMap[0].pieces=null,r.option.visualMap[0].formatter=function(t,e){return Math.floor(t)+"-"+Math.ceil(e)};else if("world"==r.type){var d={min:550,max:n};p.pop();var f=o(p,h-1,550);f.push(d),r.option.visualMap[0].pieces=f}else r.option.visualMap[0].pieces=o(p,h,p[p.length-1]);for(r._myChart.clear(),r.option.series[0].data.length=0;s<i.length;s++)r.option.series[0].data.push({name:i[s].name,value:1==e?i[s].valueArea:i[s].value,valuezb:i[s].valuezb||"",valueAreazb:i[s].valueAreazb||"",valuepm:i[s].valuepm||"",valueAreapm:i[s].valueAreapm||"",labelShow:e});l(r.option)},t.delayTime||500)},on:function(t,e){var i=this;"drill"==t&&i._myChart.on("click",function(t){e({name:t.name,index:s[t.name]})})},resize:function(){var t=this;t._myChart.resize()},isEmpty:function(t){var e=null;for(e in t)return!1;return!0}}),t.exports=r},function(t,e){function i(){if(arguments.length<1)return null;for(var t=Object.create(arguments[0]),e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t}t.exports=i},function(t,e,i){function a(){r.call(this)}var n=i(2),r=i(4),s=i(5);a.prototype=n(r.prototype,{constructor:a,_invalidatePropertiesFlag:!1,_invalidateSizeFlag:!1,_invalidateDisplayListFlag:!1,_x:0,x:function(t){return 0==arguments.length?this._x:void(this._x!=t&&(this._x=t,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList()))},_y:0,y:function(t){return 0==arguments.length?this._y:void(this._y!=t&&(this._y=t,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList()))},_width:100,width:function(t){return 0==arguments.length?this._width:void(this._width!=t&&(this._width=t,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList()))},_height:100,height:function(t){return 0==arguments.length?this._height:void(this._height!=t&&(this._height=t,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList()))},initialize:function(){},invalidateProperties:function(){this._invalidatePropertiesFlag||(this._invalidatePropertiesFlag=!0,s.getInstance().invalidateProperties(this))},invalidateSize:function(){this._invalidateSizeFlag||(this._invalidateSizeFlag=!0,s.getInstance().invalidateSize(this))},invalidateDisplayList:function(){this._invalidateDisplayListFlag||(this._invalidateDisplayListFlag=!0,s.getInstance().invalidateDisplayList(this))},validateNow:function(){s.getInstance().validateClient(this)},validateProperties:function(){this._invalidatePropertiesFlag&&(this.commitProperties(),this._invalidatePropertiesFlag=!1)},validateSize:function(){this._invalidateSizeFlag&&(this.measure(),this._invalidateSizeFlag=!1)},validateDisplayList:function(){this._invalidateDisplayListFlag&&(this.updateDisplayList(),this._invalidateDisplayListFlag=!1)},commitProperties:function(){},measure:function(){},updateDisplayList:function(){},setStyle:function(){}}),t.exports=a},function(t,e){function i(t){if(t&&!(t instanceof i))throw new Error("Illegal target.");this._target=t}i.prototype={constructor:i,_target:null,addEventListener:function(t,e,i){var a=this;if(!t||"function"!=typeof e)throw new Error("Illegal parameters.");void 0===a._mapKTypeVListenerTokens&&(a._mapKTypeVListenerTokens={});var n=a._mapKTypeVListenerTokens[t];void 0===n&&(n=[],a._mapKTypeVListenerTokens[t]=n);var r={listener:e,thisArg:i};n.push(r)},removeEventListener:function(t,e){var i=this;if(!t||"function"!=typeof e)throw new Error("Illegal parameters.");if(void 0!==i._mapKTypeVListenerTokens){var a=i._mapKTypeVListenerTokens[t];if(void 0!==a){for(var n=-1,r=null,s=0;s<a.length;s++)if(r=a[s],r.listener===e){n=s;break}n!==-1&&(a.splice(n,1),delete r.listener,delete r.thisArg),a.length<1&&delete i._mapKTypeVListenerTokens[t]}}},removeEventListeners:function(t){var e=this;if(void 0!==e._mapKTypeVListenerTokens)if(void 0===t)for(var i in e._mapKTypeVListenerTokens)e._mapKTypeVListenerTokens.hasOwnProperty(i)&&e.removeEventListeners(i);else{var a=e._mapKTypeVListenerTokens[t];if(void 0===a)return;for(var n=0;n<a.length;n++){var r=a[n];delete r.listener,delete r.thisArg}delete e._mapKTypeVListenerTokens[t]}},hasEventListener:function(t,e){var i=this;if(!t)throw new Error("Illegal parameters.");if(void 0===i._mapKTypeVListenerTokens)return!1;var a=i._mapKTypeVListenerTokens[t];if(void 0===e)return void 0!==a;for(var n=0;n<a.length;n++){var r=a[n];if(r.listener===e)return!0}return!1},dispatchEvent:function(t){var e=this;if(!t||!t.type)throw new Error("Illegal parameter event: "+t);if(t instanceof Event){console.warn("It recommends to use Object instead of Event class.");var i={};for(var a in t)t[a]instanceof Function||(i[a]=t[a]);t=i}if(void 0!==e._mapKTypeVListenerTokens){var n=e._mapKTypeVListenerTokens[t.type];if(void 0!==n){var r=this._target||e;t.target=r;for(var s=0;s<n.length;s++){var o=n[s];o.listener.call(o.thisArg,t)}}}},on:function(t,e,i){this.addEventListener(t,e,i)},off:function(t){this.removeEventListeners(t)},fire:function(t){this.dispatchEvent(t)}},t.exports=i},function(t,e,i){function a(){Object.call(this),this._timerCompleteHandler=this._timerCompleteHandler.bind(this),this._timer=new n(n.REQUEST_ANIMATION_FRAME,1),this._timer.on("timerComplete",this._timerCompleteHandler,this)}var n=i(6);a.prototype={constructor:a,_initialized:!1,_timer:null,_invalidatePropertiesQueue:[],_invalidatePropertiesFlag:!1,_invalidateSizeQueue:[],_invalidateSizeFlag:!1,_invalidateDisplayListQueue:[],_invalidateDisplayListFlag:!1,_timerCompleteHandler:function(t){this._invalidatePropertiesFlag&&this._validateProperties(),this._invalidateSizeFlag&&this._validateSize(),this._invalidateDisplayListFlag&&this._validateDisplayList()},invalidateProperties:function(t){t&&"function"==typeof t.validateProperties&&(this._invalidatePropertiesQueue.push(t),this._invalidatePropertiesFlag=!0,this._timer.running()||this._timer.start())},invalidateSize:function(t){t&&"function"==typeof t.validateSize&&(this._invalidateSizeQueue.push(t),this._invalidateSizeFlag=!0,this._timer.running()||this._timer.start())},invalidateDisplayList:function(t){t&&"function"==typeof t.validateDisplayList&&(this._invalidateDisplayListQueue.push(t),this._invalidateDisplayListFlag=!0,this._timer.running()||this._timer.start())},validateClient:function(t){if(!t)throw new Error("Target is NULL.");"function"==typeof t.validateProperties&&t.validateProperties(),"function"==typeof t.validateSize&&t.validateSize(),"function"==typeof t.validateDisplayList&&t.validateDisplayList()},_validateProperties:function(){for(;this._invalidatePropertiesQueue.length>0;){var t=this._invalidatePropertiesQueue.pop();t.validateProperties()}this._invalidatePropertiesFlag=!1},_validateSize:function(){for(;this._invalidateSizeQueue.length>0;){var t=this._invalidateSizeQueue.pop();t.validateSize()}this._invalidateSizeFlag=!1},_validateDisplayList:function(){for(;this._invalidateDisplayListQueue.length>0;){var t=this._invalidateDisplayListQueue.pop();t.validateDisplayList()}this._invalidateDisplayListFlag=!1}};var r=new a;a.getInstance=function(){return r},t.exports=a},function(t,e,i){function a(t,e){r.call(this),this._run=this._run.bind(this),this._setIntervalHandler=this._setIntervalHandler.bind(this),this._requestAnimationFrameHandler=this._requestAnimationFrameHandler.bind(this),this.delay(t),this.repeatCount(e||0)}var n=i(2),r=i(4);a.REQUEST_ANIMATION_FRAME=-4132,a.prototype=n(r.prototype,{constructor:a,_delay:void 0,_repeatCount:0,_currentCount:0,_intervalId:void 0,_setIntervalHandler:function(){this._run()},_requestAnimationFrameFlag:!1,_requestAnimationFrameCount:0,_requestAnimationFrameHandler:function(){1==this._requestAnimationFrameCount&&this._run(),this._requestAnimationFrameCount<1&&this._requestAnimationFrameCount++,this._requestAnimationFrameFlag&&requestAnimationFrame(this._requestAnimationFrameHandler)},_run:function(){return 0!=this._repeatCount&&this._currentCount>=this._repeatCount?(this.stop(),void this.fire({type:"timerComplete"})):(this._currentCount++,void this.fire({type:"timer"}))},delay:function(t){if(0==arguments.length)return this._delay;if(this._delay!=t){if(isNaN(t)||!isFinite(t)||t<=0&&t!=a.REQUEST_ANIMATION_FRAME)throw new Error("Illegal delay value: "+t);return this._delay=t,this.running()&&(this.stop(),this.start()),this}},repeatCount:function(t){if(0==arguments.length)return this._repeatCount;if(this._repeatCount!=t){if(isNaN(t)||!isFinite(t)||t<0)throw new Error("Illegal repeat count value: "+t);return this._repeatCount=t,this}},currentCount:function(){return this._currentCount},running:function(){return"number"==typeof this._intervalId||this._requestAnimationFrameFlag},reset:function(){this.stop(),this._currentCount=0},start:function(){this.running()||(this._delay==a.REQUEST_ANIMATION_FRAME&&"function"==typeof requestAnimationFrame?(this._requestAnimationFrameFlag=!0,requestAnimationFrame(this._requestAnimationFrameHandler)):this._delay>0&&(this._intervalId=setInterval(this._setIntervalHandler,this._delay)))},stop:function(){this.running()&&(clearInterval(this._intervalId),this._intervalId=null,this._requestAnimationFrameFlag=!1,this._requestAnimationFrameCount=0)}}),t.exports=a},function(t,e,i){var a=i(2),n=i(3),r=function(){n.call(this)};r.prototype=a(n.prototype,{init:function(t){var e=this;e._dom=t.domEle,e._width=t.width,e._height=t.height,e._svg=d3.select(e._dom).append("svg").attr("width",e._width).attr("height",e._height)},setData:function(t){function e(t,e,i){var n=a._svg.append("defs").append("radialGradient").attr("id",i).attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","50%").attr("fy","50%");return n.append("stop").attr("offset","60%").attr("stop-opacity",1).style("stop-color",t),n.append("stop").attr("offset","100%").attr("stop-opacity",1).style("stop-color",e),"url(#"+i+")"}function i(t,e,i,a){if(t<3)throw new Error("点数必须大于等于3。");for(var n,r,s=2*Math.PI,o=(Math.PI/180,[]),l=s/t,u=0;u<t;u++){var p=l*u,h=Math.cos(p)*e+i,d=Math.sin(p)*e+a;o.push(0==u?"M":"L",h,d),0==u&&(n=h,r=d)}return o.push("L",n,r),o.join(" ")}var a=this;a._data=t.data,zoom=t.zoom||1,maxRadius=t.maxRadius||100,minRadius=t.minRadius||40,a._radius=zoom,a._shape=t.shape;var n=d3.pack().size([a._width-10,a._height-10]).padding(1.5);a._data.sort(function(t,e){return t.value-e.value});var r=d3.hierarchy({children:a._data}).sum(function(t){return t.value}).sort(function(t,e){return e.value-t.value}).each(function(t){if(e=t.data.id){var e,i=e.lastIndexOf(".");t.id=e,t.package=e.slice(0,i),t.class=e.slice(i+1)}}),s=a._svg.selectAll(".node").data(n(r).leaves()).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"});a._node=s;"circle"==a._shape?s.append("circle").attr("r",function(t){return t.r*a._radius}):"polygon"==a._shape&&s.append("path").attr("d",function(t){return i(6,t.r*a._radius,0,0)}),s.style("cursor","pointer").style("fill",e("#2B88DD","#2F89E6","radialColor")).attr("points",function(t){return t}).on("mouseover",function(){d3.select(this).style("fill",e("#EED700","#C0B058","radialColor3")).style("opacity","1")}).on("mouseout",function(){d3.select(this).style("fill",e("#2B88DD","#2F89E6","radialColor2")).style("opacity",function(t){return t.opacity})}),s.append("text").attr("dy",".35em").attr("text-anchor","middle").style("fill","#fff").style("font-size",function(t){return Math.max(12,.35*t.r)}).style("cursor","pointer").style("font-family","微软雅黑").text(function(t){return t.class})},on:function(t,e){var i=this;if("click"!=t)throw new Error("请注册点击事件===Click");i._node.on("click",e)}}),t.exports=r}])});